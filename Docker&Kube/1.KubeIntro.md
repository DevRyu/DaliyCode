**서버 운영의 흐름**

(서버 상태 관리를 위한 방법)

**도커 등장 전**

자체 서버 -> 설정 관리도구 -> 가상머신 -> 클라우드 -> pass



1. **자체서버 운영시**

서버구입,설치,서버PC조립,네트워크연결,OS설치,계정 설정, 방화벽설정

->서버 설정을 위한 노력과 시간이 필요, 장비 선택에 있어 많은 노력

어려운 상태 관리

->명령어를 이용한 서버관리 -> 만약 언어 버전 업의 상황일 시? -> 처음부터 다시 설정

결론

변화를 싫어하게 되고 확장이 어려워서 발전이 어려움



2. **설정 관리 도구**

명령어를 통한 서버관리하지 않음

상태를 관리하는 코드를 이용하여 서버관리

선언적 서버 상태 정의 가능하고 

서버의 상태를 다시 똑같이 재현 가능

서버운영의 협업이 가능

ex)Ansible,Chef,Puppet



3. **가상머신의 등장**

하나의 서버에 **여러 개의 가상 서버 설치가능**,

여러 가상 서버내에서 버전관리(상태를 이미지로 저장)가능

새로운 서버를 만들고 기존 서버의 내용 복사가능

mutable 방식 : 기존 어플리케이션 버전을 새로운 버전 업데이트 시

Immutable 방식 : 새로운 어플리케이션 버전이 설치된 서버의 상태를 이미지로 만들고 교체 시

서버 관리자 입장에서는 Immutable한 방법이 좋음 (mutable시 업데이트 도중 여러 장애가 있음)

하지만 가상머신에서 Immutable 방식으로 교체하는 것도 방법이 어려웠던 문제가 있고 특정 회사에 종속이 됨 



4. **클라우드**

하드웨어들의 파편화 문제(여러대의 선으로 연결) 해결

가상화 환경만으로 아키텍처 구성 편함(서비스 인스턴스)

이미지기반으로 다수의 서버 상태관리(서버 운영에 문제는 있었음) 



5. **PaaS**

서버 운영 지식 없이도 (서버 운영시 복잡하고 여러움) 소스코드만으로 배포가능

(방법이 정해진)일반화 된 프로비저닝 방법을 제공

예)Heroku, Netlify, Aws Elastic Beanstalk, App Enghine

PasS의 단점

어플리케이션을 PasS방식에 맞게 작성해야하고

원격으로 클라우드 서버 접속 불가능, 서버의 파일 시스템 사용 못함

Site패키지를 설치 불가, 로그 수집 제한적으로 허용,

PasS에서의 이슈?

크론잡(문자 발송,예약, 정산)

데이터 분석(BigQuery, S3)

로그 분석(ELK,StackDriver,CloudWatch)

성능 모니터링, A/B테스트, Canary 배포, 네트워크 스토리지 설정 등

각 회사 PasS 서비스별 지원을 안해주면 위의 이슈들을 적용하기 어렵다

**도커 이후**

도커 -> 쿠버네티스 -> 서비스메시



1. 도커

기존 VM에서 HyperVisor랑 GusetOS 제거되고

도커엔진위에서 어플리케이션과 파일시스템 사용

**특징**

확장성

포준성

이미지

설정

자원

**도커가 가저온 변화**

모든 어플리케이션을 컨테이너(인스턴스)

Blue Green배포

**서비스 디스커버리**

docker-gen

쿠버네티스(컨테이너 오케르트레이션)

스케쥴링

클러스터링

서비스 디스커버리

로깅과 모니터링

쿠버네스가 오케스트레이션 표준

**서비스 메시**

넷플릭스에서 OSS에서 지원하는 기능과 분산 오니터링 같은 기능을 프록시 방식으로 제공

왜 서비스 메시?

처음에 서버 구동 시 잘 안될때 Retry 관련 코드로 작성해야했엇음

**서비스메시로 사용시 **

각 서비스의 프록시를 통해 요청으로 서비스를 구동시킴(Yaml 명령어로)

프록시는 경량화 되어있음

**결론**

**가상환경 서버 상태를 관리하기 위한 노력의 결과**
